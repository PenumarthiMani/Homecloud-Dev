<aura:component controller='RegCardHelper' implements="force:appHostable,force:hasSObjectName,lightning:actionOverride,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,force:lightningQuickActionWithoutHeader" access='global'>
    <aura:attribute name="today" type="Date" />
    <aura:handler name="init" action="{!c.doInit}" value="{!this}"/>
    
    <aura:attribute name="simpleRecord" type="Object"/>
    <aura:attribute name="record" type="String"/>
    <aura:attribute name="error" type="String"/>
    <aura:attribute name="showSpinner" type="boolean" default="true"/>    
    <force:recordData aura:id="forceRecord"
                      recordId="{!v.recordId}"
                      layoutType="FULL"
                      targetRecord="{!v.record}"
                      targetFields="{!v.simpleRecord}"
                      fields="Id, Name,Date__c,Status__c"/>
    
    <lightning:notificationsLibrary aura:id="notifLib"/>
    <aura:if isTrue="{!v.showSpinner}">
        <lightning:spinner alternativeText="Loading" size="medium" />
    </aura:if>
    
    <div aura:id="showForm" class="slds-hide">
        <lightning:recordEditForm aura:id="recordEditForm"  
                                  objectApiName="Connection__c" 
                                  recordId="{!v.recordId}" 
                                  onsubmit="{!c.onsubmitaction}"
                                  onsuccess="{!c.handleSuccess}">
            
            
            <!-- the messages component is for error messages -->
            <lightning:messages />
            <lightning:card  title="Reg Card"  class="slds-align_absolute-center">
            </lightning:card>
            <h3 class="slds-section-title--divider">Reg Card Information</h3>
            <lightning:layout>
                <lightning:layoutItem  size="6">
                    <lightning:inputField fieldName="I_plan_to_purchase_a_home__c" />
                </lightning:layoutItem>
                <lightning:layoutItem  size="6">
                    <lightning:inputField fieldName="How_did_you_hear_about_us__c" />
                </lightning:layoutItem>
            </lightning:layout>
            <lightning:layout>
                <lightning:layoutItem  size="6">
                    <lightning:inputField fieldName="When_do_you_plan_to_move__c" />
                </lightning:layoutItem>
                <lightning:layoutItem  size="6">
                    <lightning:inputField fieldName="Current_Residence__c" />
                </lightning:layoutItem>
            </lightning:layout>
            <lightning:layout>
                <lightning:layoutItem size="6">
                    <lightning:inputField fieldName="Price_Range_Min__c" />
                </lightning:layoutItem>
                <lightning:layoutItem size="6">
                    <lightning:inputField fieldName="Price_Range_Max__c" />
                </lightning:layoutItem>
            </lightning:layout>
            <lightning:layout>
                <lightning:layoutItem size="6">
                    <lightning:inputField fieldName="How_many_bedrooms_you_want_in_New_Home__c" />
                </lightning:layoutItem>
                <lightning:layoutItem  size="6">         
                    <!--<lightning:inputField aura:id='datefld' fieldName="Date__c" value="{!v.today}" displayDatePicker="false"/> --> 
                    <ui:inputDate aura:id="datefield" value="{!v.today}" label="Date" displayDatePicker="true" format="MM/dd/yyyy" required="true" />   
                </lightning:layoutItem>
            </lightning:layout>                
            
            
            <div class="slds-m-top_medium slds-align_absolute-center" style="padding-top:2%;padding-bottom:2%">
                <lightning:button class="slds-m-top_small " type="submit" label="Save" />
                <lightning:button class="slds-m-top_small " label="Cancel"  onclick="{! c.cancel}" />
            </div>
            
        </lightning:recordEditForm>
        <lightning:navigation aura:id="navService"/>
    </div>
    
</aura:component>